<%# ユーザー状況表示 %>

<div class="user-status">
  <p><%= user_status %></p>
</div>

<div class="lobby-actions">
  <%= link_to 'ルーム作成', new_lobby_path, class: 'btn btn-primary' %>
  <%= link_to "ルームに戻る", back_room, class: "btn btn-primary" %>
</div>

<section class="rooms-section">
  <h2>全ルーム一覧</h2>
  <% if @rooms.empty? %>
    <p class="no-rooms">現在、ルームはありません。</p>
  <% else %>
    <div class="rooms-list">
      <% @rooms.each do |room| %>
        <div class="room-item">
          <%= room_card(room) %>
          <% @users = room_participants(room) %>
          <p class="room-participants">参加者:
          <% @users.each do |user| %>
            <%= user.name %></p>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</section>

<section class="join-section">
  <h2>ルーム参加</h2>
  <%= form_with(model: @join_room, url: join_lobby_path, local: true) do |f| %>

    <div class="form-group">
      <%= f.label :room_name, 'ルーム名', class: 'form-label' %>
      <%= f.text_field :room_name, required: true, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= f.label :room_password, 'パスワード', class: 'form-label' %>
      <%= f.password_field :room_password, required: true, class: 'form-control' %>
    </div>

    <div class="form-actions">
      <%= f.submit '参加', class: 'btn btn-success' %>
    </div>
  <% end %>
 
</section>